// Magnific Popup v0.8.3 by Dmitry Semenov
// http://bit.ly/magnific-popup#build=image+iframe
(function(e){var t="Close",n="BeforeAppend",r="MarkupParse",i="Open",s="Change",o="mfp",u="."+o,a="mfp-ready",f="mfp-removing",l="mfp-prevent-close",c,h=function(){},p,d=e(window),v,m,g,y,b,w=function(e,t){c.ev.on(o+e+u,t)},E=function(t,n,r,i){var s=document.createElement("div");return s.className="mfp-"+t,r&&(s.innerHTML=r),i?n&&n.appendChild(s):(s=e(s),n&&s.appendTo(n)),s},S=function(t,n){c.ev.triggerHandler(o+t,n),c.st.callbacks&&(t=t.charAt(0).toLowerCase()+t.slice(1),c.st.callbacks[t]&&c.st.callbacks[t].apply(c,e.isArray(n)?n:[n]))},x=function(){(c.st.focus?c.content.find(c.st.focus).eq(0):c.wrap).focus()},T=function(t){if(t!==b||!c.currTemplate.closeBtn)c.currTemplate.closeBtn=e(c.st.closeMarkup.replace("%title%",c.st.tClose)),b=t;return c.currTemplate.closeBtn};h.prototype={constructor:h,init:function(){var t=navigator.appVersion;c.isIE7=t.indexOf("MSIE 7.")!==-1,c.isAndroid=/android/gi.test(t),c.isIOS=/iphone|ipad|ipod/gi.test(t),c.probablyMobile=c.isAndroid||c.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),v=e(document.body),m=e(document),c.popupsCache={}},open:function(t){if(c.isOpen)return;var n;c.types=[],y="",c.ev=t.el||m;if(t.isObj)c.index=t.index||0;else{c.index=0;var s=t.items,o;for(n=0;n<s.length;n++){o=s[n],o.parsed&&(o=o.el[0]);if(o===t.el[0]){c.index=n;break}}}t.key?(c.popupsCache[t.key]||(c.popupsCache[t.key]={}),c.currTemplate=c.popupsCache[t.key]):c.currTemplate={},c.st=e.extend(!0,{},e.magnificPopup.defaults,t),c.fixedContentPos=c.st.fixedContentPos==="auto"?!c.probablyMobile:c.st.fixedContentPos,c.items=t.items.length?t.items:[t.items],c.bgOverlay||(c.bgOverlay=E("bg").on("click"+u,function(){c.close()}),c.wrap=E("wrap").attr("tabindex",-1).on("click"+u,function(t){var n=t.target;if(e(n).hasClass(l))return;c.st.closeOnContentClick?c.close():(!c.content||e(n).hasClass("mfp-close")||c.preloader&&t.target===c.preloader[0]||n!==c.content[0]&&!e.contains(c.content[0],n))&&c.close()}),c.container=E("container",c.wrap)),c.contentContainer=E("content"),c.st.preloader&&(c.preloader=E("preloader",c.container,c.st.tLoading));var f=e.magnificPopup.modules;for(n=0;n<f.length;n++){var h=f[n];h=h.charAt(0).toUpperCase()+h.slice(1),c["init"+h].call(c)}S("BeforeOpen"),c.st.closeBtnInside?(w(r,function(e,t,n,r){n.close_replaceWith=T(r.type)}),y+=" mfp-close-btn-in"):c.wrap.append(T()),c.st.alignTop&&(y+=" mfp-align-top"),c.fixedContentPos?c.wrap.css({overflow:c.st.overflowY,overflowX:"hidden",overflowY:c.st.overflowY}):c.wrap.css({top:d.scrollTop(),position:"absolute"}),(c.st.fixedBgPos===!1||c.st.fixedBgPos==="auto"&&!c.fixedContentPos)&&c.bgOverlay.css({height:m.height(),position:"absolute"}),m.on("keyup"+u,function(e){e.keyCode===27&&c.close()}),d.on("resize"+u,function(){c.updateSize()}),c.st.closeOnContentClick||(y+=" mfp-auto-cursor"),y&&c.wrap.addClass(y);var p=c.wH=d.height(),g={};if(c.fixedContentPos&&c.st.overflowY!=="scroll"){var b=c._getScrollbarSize();b&&(g.paddingRight=b)}c.fixedContentPos&&(c.isIE7?e("body, html").css("overflow","hidden"):g.overflow="hidden");var N=c.st.mainClass;c.isIE7&&(N+=" mfp-ie7"),N&&c._addClassToMFP(N),c.updateItemHTML(),S("BuildControls"),v.css(g),c.bgOverlay.add(c.wrap).prependTo(document.body),c._lastFocusedEl=document.activeElement,setTimeout(function(){c.content?(c._addClassToMFP(a),x()):c.bgOverlay.addClass(a),m.on("focusin"+u,function(t){if(t.target!==c.wrap[0]&&!e.contains(c.wrap[0],t.target))return x(),!1})},16),c.isOpen=!0,c.updateSize(p),S(i)},close:function(){if(!c.isOpen)return;c.isOpen=!1,c.st.removalDelay?(c._addClassToMFP(f),setTimeout(function(){c._close()},c.st.removalDelay)):c._close()},_close:function(){S(t);var n=f+" "+a+" ";c.bgOverlay.detach(),c.wrap.detach(),c.container.empty(),c.st.mainClass&&(n+=c.st.mainClass+" "),c._removeClassFromMFP(n);if(c.fixedContentPos){var r={paddingRight:0};c.isIE7?e("body, html").css("overflow","auto"):r.overflow="visible",v.css(r)}m.off("keyup"+u+" focusin"+u),c.ev.off(u),c.wrap.attr("class","mfp-wrap").removeAttr("style"),c.bgOverlay.attr("class","mfp-bg"),c.container.attr("class","mfp-container"),(!c.st.closeBtnInside||c.currTemplate[c.currItem.type]===!0)&&c.currTemplate.closeBtn&&c.currTemplate.closeBtn.detach(),c._lastFocusedEl&&e(c._lastFocusedEl).focus(),c.content=null,c.currTemplate=null,c.prevHeight=0},updateSize:function(e){if(c.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*t;c.wrap.css("height",n),c.wH=n}else c.wH=e||d.height();S("Resize")},updateItemHTML:function(){var t=c.items[c.index];c.contentContainer.detach(),c.content&&c.content.detach(),t.parsed||(t=c.parseEl(c.index)),c.currItem=t;var n=t.type;if(!c.currTemplate[n]){var r=c.st[n]?c.st[n].markup:!1;S("FirstMarkupParse",r),r?c.currTemplate[n]=e(r):c.currTemplate[n]=!0}g&&g!==t.type&&c.container.removeClass("mfp-"+g+"-holder");var i=c["get"+n.charAt(0).toUpperCase()+n.slice(1)](t,c.currTemplate[n]);c.appendContent(i,n),t.preloaded=!0,S(s,t),g=t.type,c.container.prepend(c.contentContainer)},appendContent:function(e,t){c.content=e,e?c.st.closeBtnInside&&c.currTemplate[t]===!0?c.content.find(".mfp-close").length||c.content.append(T()):c.content=e:c.content="",S(n),c.container.addClass("mfp-"+t+"-holder"),c.contentContainer.append(c.content)},parseEl:function(t){var n=c.items[t],r=n.type;n.tagName?n={el:e(n)}:n={data:n,src:n.src};if(n.el){var i=c.types;for(var s=0;s<i.length;s++)if(n.el.hasClass("mfp-"+i[s])){r=i[s];break}n.src=n.el.attr("data-mfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=r||c.st.type,n.index=t,n.parsed=!0,c.items[t]=n,S("ElementParse",n),c.items[t]},addGroup:function(t,n){var r=function(r){var i=n.midClick!==undefined?n.midClick:e.magnificPopup.defaults.midClick;if(i||r.which!==2){var s=n.disableOn!==undefined?n.disableOn:e.magnificPopup.defaults.disableOn;if(s)if(e.isFunction(s)){if(!s.call(c))return!0}else if(e(window).width()<s)return!0;r.preventDefault(),n.el=e(this),n.mainEl=t,n.delegate&&(n.items=t.find(n.delegate)),c.open(n)}};n||(n={});var i="click.magnificPopup";n.items?(n.isObj=!0,t.off(i).on(i,r)):(n.isObj=!1,n.delegate?t.off(i).on(i,n.delegate,r):(n.items=t,t.off(i).on(i,r)))},updateStatus:function(e,t){if(c.preloader){p!==e&&c.container.removeClass("mfp-s-"+p),!t&&e==="loading"&&(t=c.st.tLoading);var n={status:e,text:t};S("UpdateStatus",n),e=n.status,t=n.text,c.preloader.html(t),c.preloader.find("a").click(function(e){e.stopImmediatePropagation()}),c.container.addClass("mfp-s-"+e),p=e}},_addClassToMFP:function(e){c.bgOverlay.addClass(e),c.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),c.wrap.removeClass(e)},_hasScrollBar:function(e){return document.body.clientHeight>(e||d.height())?!0:!1},_parseMarkup:function(t,n,i){var s;i.data&&(n=e.extend(i.data,n)),S(r,[t,n,i]),e.each(n,function(e,n){if(n===undefined||n===!1)return!0;s=e.split("_");if(s.length>1){var r=t.find(u+"-"+s[0]);if(r.length>0){var i=s[1];i==="replaceWith"?r[0]!==n[0]&&r.replaceWith(n):i==="img"?r.is("img")?r.attr("src",n):r.replaceWith('<img src="'+n+'" class="'+r.attr("class")+'" />'):r.attr(s[1],n)}}else t.find(u+"-"+e).html(n)})},_getScrollbarSize:function(){if(c.scrollbarSize===undefined){var e=document.createElement("div");e.id="mfp-sbm",e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),c.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return c.scrollbarSize}},e.magnificPopup={instance:null,proto:h.prototype,modules:[],open:function(t,n){return e.magnificPopup.instance||(c=new h,c.init(),e.magnificPopup.instance=c),t||(t={}),t.isObj=!0,t.index=n===undefined?0:n,this.instance.open(t)},close:function(){return e.magnificPopup.instance.close()},registerModule:function(t,n){n.options&&(e.magnificPopup.defaults[t]=n.options),e.extend(this.proto,n.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeBtnInside:!0,alignTop:!1,removalDelay:0,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},e.fn.magnificPopup=function(t){return e.magnificPopup.instance||(c=new h,c.init(),e.magnificPopup.instance=c),c.addGroup(e(this),t),e(this)};var N,C=function(t){if(t.data&&t.data.title!==undefined)return t.data.title;var n=c.st.image.titleSrc;if(n){if(e.isFunction(n))return n.call(c,t);if(t.el)return t.el.attr(n)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><div class="mfp-img"></div><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=c.st.image,n=".image";c.types.push("image"),w(i+n,function(){c.currItem.type==="image"&&e.cursor&&v.addClass(e.cursor)}),w(t+n,function(){e.cursor&&v.removeClass(e.cursor),d.off("resize"+u)}),w("Resize"+n,function(){c.resizeImage()})},resizeImage:function(){var e=c.currItem;if(!e.img)return;c.st.image.verticalFit&&e.img.css("max-height",c.wH+"px")},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,N&&clearInterval(N),e.isCheckingImgSize=!1,S("ImageHasSize",e),e.imgHidden&&(c.content&&c.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var t=0,n=e.img[0],r=function(i){N&&clearInterval(N),N=setInterval(function(){if(n.naturalWidth>0){c._onImageHasSize(e);return}t>200&&clearInterval(N),t++,t===3?r(10):t===40?r(50):t===100&&r(500)},i)};r(1)},getImage:function(t,n){var r=0,i=function(){t&&(t.img[0].complete?(t.img.off(".mfploader"),t===c.currItem&&(c._onImageHasSize(t),c.updateStatus("ready")),t.hasSize=!0,t.loaded=!0):(r++,r<200?setTimeout(i,100):s()))},s=function(){t&&(t.img.off(".mfploader"),t===c.currItem&&(c._onImageHasSize(t),c.updateStatus("error",o.tError.replace("%url%",t.src))),t.hasSize=!0,t.loaded=!0,t.loadError=!0)},o=c.st.image,u=n.find(".mfp-img");if(u.length){var a=new Image;a.className="mfp-img",t.img=e(a).on("load.mfploader",i).on("error.mfploader",s),a.src=t.src,u.is("img")&&(t.img=t.img.clone())}return c._parseMarkup(n,{title:C(t),img_replaceWith:t.img},t),c.resizeImage(),t.hasSize?(N&&clearInterval(N),t.loadError?(n.addClass("mfp-loading"),c.updateStatus("error",o.tError.replace("%url%",t.src))):(n.removeClass("mfp-loading"),c.updateStatus("ready")),n):(c.updateStatus("loading"),t.loading=!0,t.hasSize||(t.imgHidden=!0,n.addClass("mfp-loading"),c.findImageSize(t)),n)}}});var k="iframe",L=function(e){if(c.isIE7&&c.currItem&&c.currItem.type===k){var t=c.content.find("iframe");t.length&&t.css("display",e?"block":"none")}};e.magnificPopup.registerModule(k,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){c.types.push(k),L(!0),w(t+"."+k,function(){L()})},getIframe:function(t,n){var r=t.src,i=c.st.iframe;e.each(i.patterns,function(){if(r.indexOf(this.index)>-1)return this.id&&(typeof this.id=="string"?r=r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):r=this.id.call(this,r)),r=this.src.replace("%id%",r),!1});var s={};return i.srcAction&&(s[i.srcAction]=r),c._parseMarkup(n,s,t),c.updateStatus("ready"),n}}})})(window.jQuery||window.Zepto);